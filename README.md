
# CDM JSDoc Template

A clean, responsive documentation template with search and navigation highlighting for JSDoc 3.

Forked from [braintree/jsdoc-template](https://github.com/braintree/jsdoc-template).

- [Install](#install)
- [Set up](#set-up)
- [Included plugins](#included-plugins)
  - [jsdoc-tsimport-plugin](#jsdoc-tsimport-plugin)
  - [jsdoc-typeof-plugin](#jsdoc-typeof-plugin)
- [Watch for file changes](#watch-for-file-changes)
- [Algolia DocSearch](#algolia-docsearch)
- [License](#license)

## Install

```sh
npm i -D cdmgtri/jsdoc-template
```

## Set up

**Documentation generation script**

In `package.json`, add the following script to generate the docs:

```json
"script": {
  "docs": "npx jsdoc -c jsdoc.json"
}
```

*Note: JSDoc must be installed locally or globally.*

**Empty docs before regenerating**

To move the current docs folder to the trash for a clean regeneration, add the following script to `package.json` and update the docs folder name if needed:

```json
"script": {
  "docs:clean": "npx trash docs"
}
```

Do not use this script if the project has additional content in this folder that will not be automatically regenerated by JSDocs.  And note that this script will fail if another process has a lock on the folder.

The [trash-cli](https://github.com/sindresorhus/trash-cli) library included with this package works on maxOS (10.12+), Windows (8+), and has some degree of support for Linux.

**JSDoc configuration**

Configure JSDoc settings in `jsdoc.json`.

Example settings:

```json
{
  "source": {
    "include": ["src"],
  },
  "opts": {
    "access": ["public", "undefined"],
    "destination": "docs",
    "readme": "README.md",
    "recurse": true,
    "template": "node_modules/jsdoc-template"
  },
  "plugins": [
    "plugins/markdown",
    "node_modules/jsdoc-tsimport-plugin",
    "node_modules/jsdoc-typeof-plugin"
  ],
  "templates": {
    "referenceTitle": "PROJECT TITLE",
    "disableSort": false,
    "collapse": true,
    "default": {
      "includeDate": false
    }
  }
}
```

## Included plugins

Two additional plugins have been included to provide extra JSDoc support:

### jsdoc-tsimport-plugin

This is a JSDoc plugin to support the Typescript import syntax ([GitHub link](https://github.com/polyforest/jsdoc-tsimport-plugin)).

It adds support for the following syntax:

```js
/**
 * @type {typeof import("./path/to/module").MyTypeDefName}
 */
```

### jsdoc-typeof-plugin

A jsdoc plugin that will convert types like `{typeof SomeClass}` into `{Class<SomeClass>}` ([npm link](https://www.npmjs.com/package/jsdoc-typeof-plugin)).  Useful for when the type is the class itself, not an instance of the class.

It adds support for the following syntax:

```js
/**
* @param {typeof MyClass} x
*/
function a(x) {
  // ...
}
```

## Watch for file changes

Use nodemon to watch for file changes and regenerate documentation on saves.

**Install `nodemon`**

```sh
npm i -D nodemon
```

**Add a watch script to `package.json`**

This script watches for changes in the `src` directory.

```json
{
  "scripts": {
    "docs:watch": "npx nodemon --watch src --exec \"npm run docs\""
  }
}
```

**Start up the watcher**

```sh
npm run docs:watch
```

## Algolia DocSearch

To enable [Algolia DocSearch](https://community.algolia.com/docsearch/), pass a `search` object into the `templates` object.

```json
{
  "templates": {
    "search": {
      "apiKey": "your-api-key",
      "indexName": "Your index name. Defaults to braintree.",
      "hitsPerPage": "Number of Results to show. Defaults to 7.",
    }
  }
}
```

## License

Licensed under the Apache2 license.
